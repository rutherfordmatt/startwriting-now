<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start Writing Now - 3 minute journal</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C841TYRSY9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-C841TYRSY9');
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            transition: all 0.3s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            position: relative;
            transition: all 0.3s ease;
        }

        .dark-mode .container {
            background: #2d3748;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .header {
            text-align: left;
            margin-bottom: 30px;
            position: relative;
        }

        .logo {
            font-size: 2.5em;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            letter-spacing: -0.02em;
            transition: color 0.3s ease;
        }

        .streak-display {
            font-size: 1.1em;
            color: #667eea;
            font-weight: 500;
            margin-bottom: 10px;
            transition: color 0.3s ease;
        }

        .dark-mode .streak-display {
            color: #a0aec0;
        }

        .about-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9em;
            transition: color 0.3s ease;
            margin-top: 5px;
            display: inline-block;
        }

        .about-link:hover {
            color: #5a6fd8;
        }

        .dark-mode .about-link {
            color: #a0aec0;
        }

        .dark-mode .about-link:hover {
            color: #e2e8f0;
        }

        .dark-mode .logo {
            color: #e2e8f0;
        }

        .tagline {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .prompt-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            position: relative;
            transition: background 0.3s ease;
        }

        .dark-mode .prompt-section {
            background: #4a5568;
        }

        .prompt-label {
            font-weight: 500;
            color: #555;
            margin-bottom: 10px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.3s ease;
        }

        .dark-mode .prompt-label {
            color: #a0aec0;
        }

        .prompt-text {
            font-size: 1.5em;
            color: #333;
            line-height: 1.4;
            font-style: italic;
            font-weight: 600;
            padding-right: 60px;
            transition: color 0.3s ease;
        }

        .dark-mode .prompt-text {
            color: #e2e8f0;
        }

        .swap-icon {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            transition: all 0.3s ease;
        }

        .swap-icon:hover {
            background: #5a6fd8;
            transform: rotate(180deg);
        }

        .timer-section {
            text-align: center;
            margin-bottom: 25px;
        }

        .timer-display {
            font-size: 3em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 15px;
            font-family: 'Inter', sans-serif;
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .writing-area {
            margin-bottom: 25px;
        }

        .writing-textarea {
            width: 100%;
            min-height: 300px;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            font-size: 1.1em;
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
            color: #333;
        }

        .dark-mode .writing-textarea {
            background: #4a5568;
            border-color: #718096;
            color: #e2e8f0;
        }

        .writing-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .writing-textarea::placeholder {
            color: #adb5bd;
            font-style: normal;
        }

        .dark-mode .writing-textarea::placeholder {
            color: #a0aec0;
        }

        .word-count {
            text-align: right;
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 10px;
            transition: color 0.3s ease;
        }

        .dark-mode .word-count {
            color: #a0aec0;
        }

        .dark-mode-toggle {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: 2px solid #667eea;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .dark-mode-toggle:hover {
            background: #667eea;
        }

        .dark-mode .dark-mode-toggle {
            border-color: #a0aec0;
            color: #a0aec0;
        }

        .dark-mode .dark-mode-toggle:hover {
            background: #a0aec0;
            color: #2d3748;
        }

        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-save {
            background: #28a745;
            color: white;
            padding: 15px 30px;
            font-size: 1.1em;
        }

        .btn-save:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .btn-new:hover {
            background: #138496;
        }

        .timer-finished {
            color: #28a745 !important;
        }

        .pulse {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
                margin: 10px;
            }
            
            .logo {
                font-size: 2.2em;
            }
            
            .timer-display {
                font-size: 2.5em;
            }
            
            .timer-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <button class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle light mode">‚òÄÔ∏è</button>
        
        <div class="header">
            <div class="logo">Start Writing...</div>
            <div class="streak-display" id="streakDisplay">Start your writing streak!</div>
            <a href="#about" class="about-link" onclick="showAbout()">About</a>
        </div>

        <div class="prompt-section">
            <div class="prompt-label">Random Prompt</div>
            <div class="prompt-text" id="currentPrompt">Loading your writing prompt...</div>
            <button class="swap-icon" onclick="newPrompt()" title="Get new prompt">‚ü≤</button>
        </div>

        <div class="timer-section">
            <div class="timer-display" id="timerDisplay">3:00</div>
            <div class="timer-controls">
                <button class="btn btn-secondary" id="pauseBtn" onclick="pauseTimer()" style="display: none;">Pause</button>
            </div>
        </div>

        <div class="writing-area">
            <textarea 
                class="writing-textarea" 
                id="writingArea" 
                placeholder="Start writing..."
            ></textarea>
            <div class="word-count" id="wordCount">0 words</div>
        </div>

        <div class="actions">
            <button class="btn btn-save" id="saveBtn" onclick="saveEntry()">Save My Entry</button>
        </div>
    </div>

    <script>
        // Journaling prompts
        const prompts = [
            "What's one thing that made you smile today?",
            "Describe a moment when you felt completely at peace.",
            "What's something you're grateful for right now?",
            "If you could tell your past self one thing, what would it be?",
            "What's a small win you had recently?",
            "Describe your ideal Sunday morning.",
            "What's something new you learned this week?",
            "How do you want to feel by the end of today?",
            "What's a challenge you're facing, and how might you approach it?",
            "Describe a person who has positively impacted your life.",
            "What's something you're looking forward to?",
            "How has your perspective on something changed recently?",
            "What would you do if you knew you couldn't fail?",
            "Describe your perfect creative space.",
            "What's a habit you'd like to develop?",
            "How do you show kindness to yourself?",
            "What's something that always makes you laugh?",
            "Describe a place where you feel most like yourself.",
            "What's the best advice you've ever received?",
            "How do you like to celebrate small victories?",
            "What's something you're curious about right now?",
            "Describe a time when you felt proud of yourself.",
            "What does a meaningful day look like to you?",
            "How do you recharge when you're feeling drained?",
            "What's something you'd like to let go of?",
            "What skill would you love to master?",
            "Describe a conversation that changed your thinking.",
            "What brings you the most energy?",
            "How do you define success for yourself?",
            "What's a risk you're glad you took?",
            "Describe your relationship with technology.",
            "What's something you've always wanted to try?",
            "How do you handle uncertainty?",
            "What's your favorite way to be creative?",
            "Describe a tradition that's meaningful to you.",
            "What would you tell someone having a difficult day?",
            "How has failure taught you something valuable?",
            "What's something you do that feels authentic to who you are?",
            "Describe your ideal work environment.",
            "What's a belief you've outgrown?",
            "How do you practice gratitude?",
            "What's something you've learned from a difficult relationship?",
            "Describe a moment when you felt truly understood.",
            "What's your relationship with money and security?",
            "How do you want to be remembered?",
            "What's something you're learning to accept about yourself?",
            "Describe a time when you surprised yourself.",
            "What role does nature play in your life?",
            "How do you nurture your relationships?",
            "What's something you wish people understood about you?"
        ];

        // Timer variables
        let timeLeft = 180; // 3 minutes in seconds
        let timerInterval = null;
        let isRunning = false;

        // Initialize the app
        function initApp() {
            displayRandomPrompt();
            updateWordCount();
            updateStreakDisplay();
            
            // Set dark mode as default, but respect user preference if they've toggled before
            const savedDarkMode = localStorage.getItem('darkMode');
            if (savedDarkMode === null) {
                // First visit - default to dark mode
                document.body.classList.add('dark-mode');
                localStorage.setItem('darkMode', 'true');
            } else if (savedDarkMode === 'true') {
                document.body.classList.add('dark-mode');
            }
            updateDarkModeIcon();
            
            // Add textarea event listener for word count and auto-start timer
            const textarea = document.getElementById('writingArea');
            textarea.addEventListener('input', function() {
                updateWordCount();
                // Auto-start timer when user starts typing
                if (!isRunning && textarea.value.trim().length > 0 && timeLeft === 180) {
                    startTimer();
                }
            });
        }

        function displayRandomPrompt() {
            const randomIndex = Math.floor(Math.random() * prompts.length);
            document.getElementById('currentPrompt').textContent = prompts[randomIndex];
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('pauseBtn').style.display = 'inline-block';
                
                timerInterval = setInterval(() => {
                    timeLeft--;
                    updateTimerDisplay();
                    
                    if (timeLeft <= 0) {
                        finishTimer();
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            if (isRunning) {
                isRunning = false;
                clearInterval(timerInterval);
                document.getElementById('pauseBtn').style.display = 'none';
            }
        }

        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            timeLeft = 120;
            updateTimerDisplay();
            document.getElementById('startBtn').style.display = 'inline-block';
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('timerDisplay').classList.remove('timer-finished', 'pulse');
        }

        function finishTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            timeLeft = 0;
            updateTimerDisplay();
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('timerDisplay').classList.add('timer-finished', 'pulse');
            
            // Play chime sound
            playChime();
            
            // Celebration message
            setTimeout(() => {
                alert('Great job! You completed your 3-minute writing session. üéâ');
            }, 500);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
        }

        function updateWordCount() {
            const text = document.getElementById('writingArea').value;
            const words = text.trim().split(/\s+/).filter(word => word.length > 0);
            document.getElementById('wordCount').textContent = `${words.length} words`;
        }

        function saveEntry() {
            const prompt = document.getElementById('currentPrompt').textContent;
            const entry = document.getElementById('writingArea').value;
            
            if (entry.trim().length === 0) {
                alert('Please write something before saving!');
                return;
            }

            // Check if entry is substantial enough for streak (minimum 25 words)
            const words = entry.trim().split(/\s+/).filter(word => word.length > 0);
            if (words.length >= 25) {
                updateStreak();
            }
            
            // Create formatted text for download
            const timestamp = new Date().toLocaleString();
            const formattedEntry = `Start Writing Now - Journal Entry
Date: ${timestamp}
Prompt: ${prompt}

Entry:
${entry}

---
Keep writing at startwriting.now
`;
            
            // Create and trigger download
            const blob = new Blob([formattedEntry], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `journal-entry-${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const message = words.length >= 25 ? 
                'Your journal entry has been saved! üìù' : 
                'Your journal entry has been saved! Write 25+ words next time to count toward your streak. üìù';
            alert(message);
        }

        function newPrompt() {
            displayRandomPrompt();
        }

        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            localStorage.setItem('darkMode', isDarkMode);
            updateDarkModeIcon();
        }

        function updateDarkModeIcon() {
            const button = document.querySelector('.dark-mode-toggle');
            const isDarkMode = document.body.classList.contains('dark-mode');
            button.textContent = isDarkMode ? '‚òÄÔ∏è' : 'üåô';
        }

        function playChime() {
            // Create a simple chime sound using Web Audio API
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            // Create three notes for a pleasant chime
            const frequencies = [523.25, 659.25, 783.99]; // C5, E5, G5
            
            frequencies.forEach((freq, index) => {
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                oscillator.type = 'sine';
                
                // Set volume envelope for a soft chime
                const startTime = audioContext.currentTime + index * 0.2;
                gainNode.gain.setValueAtTime(0, startTime);
                gainNode.gain.linearRampToValueAtTime(0.3, startTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.001, startTime + 1.5);
                
                oscillator.start(startTime);
                oscillator.stop(startTime + 1.5);
            });
        }

        function showAbout() {
            alert(`About Start Writing

This is a simple micro-journaling app designed to help you capture your thoughts quickly and easily.

How it works:
‚Ä¢ Get a random writing prompt
‚Ä¢ Start typing to begin the 3-minute timer
‚Ä¢ Write freely without worrying about structure
‚Ä¢ Save your entry when done

The goal is to make writing a daily habit through short, focused sessions. No accounts needed - just write and save locally.

Perfect for daily reflection, gratitude practice, or creative expression.`);
        }

        // Streak tracking functions
        function getStreakData() {
            const defaultData = {
                currentStreak: 0,
                longestStreak: 0,
                lastWriteDate: null,
                writingDays: []
            };
            
            const stored = localStorage.getItem('writingStreak');
            return stored ? JSON.parse(stored) : defaultData;
        }

        function saveStreakData(data) {
            localStorage.setItem('writingStreak', JSON.stringify(data));
        }

        function updateStreak() {
            const today = new Date().toISOString().split('T')[0];
            const streakData = getStreakData();
            
            // Don't count multiple entries on the same day
            if (streakData.writingDays.includes(today)) {
                return;
            }
            
            // Add today to writing days
            streakData.writingDays.push(today);
            streakData.lastWriteDate = today;
            
            // Calculate current streak
            const sortedDays = streakData.writingDays.sort();
            let currentStreak = 1;
            
            for (let i = sortedDays.length - 2; i >= 0; i--) {
                const currentDate = new Date(sortedDays[i + 1]);
                const previousDate = new Date(sortedDays[i]);
                const dayDiff = (currentDate - previousDate) / (1000 * 60 * 60 * 24);
                
                if (dayDiff === 1) {
                    currentStreak++;
                } else {
                    break;
                }
            }
            
            streakData.currentStreak = currentStreak;
            
            // Update longest streak
            if (currentStreak > streakData.longestStreak) {
                streakData.longestStreak = currentStreak;
            }
            
            saveStreakData(streakData);
            updateStreakDisplay();
            celebrateStreak(currentStreak);
        }

        function updateStreakDisplay() {
            const streakData = getStreakData();
            const display = document.getElementById('streakDisplay');
            
            if (streakData.currentStreak === 0) {
                display.textContent = 'Start your writing streak!';
            } else if (streakData.currentStreak === 1) {
                display.textContent = 'üî• Day 1 - Keep it going!';
            } else {
                display.textContent = `üî• ${streakData.currentStreak} day streak`;
                if (streakData.longestStreak > streakData.currentStreak) {
                    display.textContent += ` (Best: ${streakData.longestStreak})`;
                }
            }
        }

        function celebrateStreak(streak) {
            let message = '';
            
            if (streak === 1) {
                message = 'Great job starting your writing streak! üéâ';
            } else if (streak === 3) {
                message = 'Amazing! 3 days in a row! üî•';
            } else if (streak === 7) {
                message = 'Incredible! You\'ve written for a whole week! üåü';
            } else if (streak === 14) {
                message = 'Two weeks of writing! You\'re building a real habit! üí™';
            } else if (streak === 30) {
                message = 'One month streak! You\'re a writing champion! üèÜ';
            } else if (streak % 10 === 0 && streak > 30) {
                message = `${streak} days of writing! Absolutely incredible! üéä`;
            }
            
            if (message) {
                setTimeout(() => alert(message), 1000);
            }
        }

        // Initialize the app when page loads
        window.addEventListener('load', initApp);
    </script>
</body>
</html>